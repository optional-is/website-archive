<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Text Stats App &laquo;  optional.is/required</title>

<link rel="stylesheet" href="https://optional.is/required/wp-content/themes/optional/style.css" type="text/css" media="all" />
<link rel="alternate" type="application/atom+xml" title="optional.is/required Atom Feed" href="http://feeds2.feedburner.com/optional?format=xml" />
<link rel="pingback" href="https://optional.is/required/xmlrpc.php" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://example.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" />
<link rel="apple-touch-icon-precomposed" href="../../../../../images/apple-touch-icon-precomposed.png"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@optionalBot">
<meta name="twitter:title" content="Text Stats App">
<meta name="twitter:description" content="Text Stats is an iOS application which can be invoked from any other application to get some basic stats about your text. From word count to reading ease, Text Stats helps improve your writing.">
<meta name="twitter:creator" content="@optionalBot">
<meta name="twitter:domain" content="http://optional.is">
</head>
<body>
<div id="header">
<h1><a href="../../../../index.html">(optional.is)</a></h1>
</div>
			
		<div class="post-4060 post type-post status-publish format-standard hentry category-applications tag-app tag-app-store tag-apps tag-ios tag-ipad tag-iphone tag-stats tag-text tag-text-stats tag-writing" id="post-4060">
			<h2 style="border-bottom: 2px solid #810aa3">Text Stats App</h2>

			<div class="entry">
<div class="time"><abbr title="2020-10-26T13:31:00+00:00">Monday, October 26th, 02020 at 13:31 UTC</abbr></div>
				
<p>We&#8217;ve been dabbling with creating iOS apps for awhile now. <a href="https://apps.apple.com/us/app/text-stats/id1373463793?ls=1">Text Stats</a> is just one little experiment. We thought it would be interesting for us to talk the process and evolution.&nbsp;</p>



<p>Firstly, we are big proponents of the Web. When something can be done in HTML, it should. What we are interested in, when developing native applications, are all the places that the Web is not (yet) available. For instance, with Text Stats we focused on being an  &#8220;Action Sheet&#8221; recipient app. That means from any application (or webpage) the text can be send into an application, of which Text Stats is one.</p>



<p>The new Shortcuts.app is the other place we explored for Text Stats. This is an automator style application on iOS which allows you to build larger  workflows. Now Text Stats exposes several small functions to return word count and other metrics from text supplied to the function.  We&#8217;re not exactly sure what it&#8217;s good for, but that&#8217;s part of the Unix philosophy. To build small, focused applications that can be building blocks of something larger.</p>



<p><a href="https://apps.apple.com/us/app/text-stats/id1373463793?ls=1">If this sounds interesting, download the app to give it a try</a>.</p>



<figure class="banner"><img loading="lazy" width="1024" height="528" src="../../../../wp-content/uploads/2020/09/Screen-Shot-2020-09-14-at-12.55.44-1024x528.png" alt="" class="wp-image-4729" srcset="../../../../wp-content/uploads/2020/09/Screen-Shot-2020-09-14-at-12.55.44-1024x528.png 1024w, ../../../../wp-content/uploads/2020/09/Screen-Shot-2020-09-14-at-12.55.44-300x155.png 300w, ../../../../wp-content/uploads/2020/09/Screen-Shot-2020-09-14-at-12.55.44-768x396.png 768w, ../../../../wp-content/uploads/2020/09/Screen-Shot-2020-09-14-at-12.55.44-1536x792.png 1536w, ../../../../wp-content/uploads/2020/09/Screen-Shot-2020-09-14-at-12.55.44-2048x1056.png 2048w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>Text Stats app screenshots</figcaption></figure>



<p>On iOS and Android, there is a concept of an action extension. In iOS when you press the share button and another modal dialog appears allowing you to select a different application to receive the sent data. These interactions allow you todo simple things like email a link to an article, post images and text to social media or export data to the file system. For your app to be in this list you need to be a registered first-class application.&nbsp;</p>



<figure class="banner"><img loading="lazy" width="1024" height="715" src="../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.04.26-1024x715.png" alt="" class="wp-image-4801" srcset="../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.04.26-1024x715.png 1024w, ../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.04.26-300x210.png 300w, ../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.04.26-768x536.png 768w, ../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.04.26-1536x1073.png 1536w, ../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.04.26-2048x1431.png 2048w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p style="boarder: 1px solid #ddd; background-color: #dedede; padding: 1em; margin-bottom: 1em">The W3C has a &#8220;<a href="https://www.w3.org/TR/web-share/">Web Share API</a>&#8221; but that is to accept text, media or links and open the native sharing, action dialog and pass that information to local applications or remote sources. What Text Stats app does, is receive that data. For now, this isn&#8217;t a replacement for a local application.</p>



<p>Those nooks and crannies where the Web hasn&#8217;t arrived yet is where we want to explore. The apps we build are helpful little utilities that scratch our own itch and learn more. We only release them because, someone else might find them useful too.</p>



<p>Keeping an eye on trends, we see more and more people are (or are trying) to use tablets as their daily computer. There are a lot of writing and note taking apps appearing to fill the gap where enterprise hasn&#8217;t yet taken over. Many aren’t geared for actually writing better, they have better, cleaner, simpler design, syncing or other features.</p>



<p>What we want is a tool to improve our writing. This includes; word count, adverb warnings, etc. Rather than try to compete as yet another word processor app, we decided to build an action extension. That way, in any writing app you can access Text Stats.&nbsp;</p>



<p>Text Stats benefits from several years of experience with Natural Language Processing and dealing with text. What we aimed for was something similar to the old “writer’s workbench” tool. WWB flagged sentences that would be hard to read, use of passive voice, warned about adverbs and more. </p>



<p><a href="http://www.hemingwayapp.com">Hemingway.app</a> is a great start, but it is a dedicated app. We wanted something slightly agnostic as an action extension.&nbsp;</p>



<p>The first thing we did was to create a new TextStats class which contains all the functions. This makes the code more portable across apps. For those of you without iOS development knowledge, you need to always create a base iOS app. Then, inside that app you can embed additional apps such as the Today widget, Action extensions, Watch apps, etc. To avoid duplicating code across all these embedded app options we created the TextStats class and shared it between the different app extensions.</p>



<p>We started with the easy stuff like getting a character count of a string. We then tried to get a rough word count by exploding on the space character. These are both a quick and good estimation of how long blob of text is. If you miss a few items it averages itself out in the end.</p>



<p style="boarder: 1px solid #ddd; background-color: #dedede; padding: 1em; margin-bottom: 1em">Are contractions one or two words? (Can&#8217;t, won&#8217;t, don&#8217;t, etc.) If we then split on apostrophes to make those into two words, we risk separating others like O&#8217;Reilly. Sometimes it makes senses, sometimes it doesn&#8217;t.<br />
<br />
Then we get to hyphenated words. Today used to be written To-day. Rock-n-roll or Rock&#8217;n&#8217;roll? Red-handed versus redhanded. If you split on hyphens it sometimes makes sense as multiple words, sometimes it doesn&#8217;t<br />
<br />
What about URLs? https://example.com/foobar/at/my/homework/ How many &#8220;words&#8221; is that string?
</p>



<p>Next, after splitting on spaces, we loop through the array of words and try to estimate syllables for each. In English this isn’t easy due to all the loan words we have incorporated into the language. As a rough first pass, every sequence of vowels counts as a new syllable. “Seek” only has one set of sequential vowels so it only has one syllable. Other words like “only” has an o and a y separated by consonants so this has two syllables. It doesn’t work for all words, but as a quick estimate it works fine.&nbsp;</p>



<p>There was one last thing we needed and that was a sentence count. That sounds simple, but actually it requires some gymnastics. Normally we just explode on full-stops. But then we aren’t getting question or exclamation sentences. To fix this we did a find and replace on ?! and converted them to . Now we could explode on full-stops and get a sentence count.&nbsp;</p>



<p>Using word count per sentence and syllables per word, it is possible to estimate some &#8220;<a href="https://en.wikipedia.org/wiki/Flesch–Kincaid_readability_tests">reading ease</a>&#8220;. This is a number to better estimate the overall text difficulty. The idea behind this equation was to help writers write to a level which most of their audience would understand. </p>



<p>There is an oft cited &#8220;fact&#8221; that newspapers are written at a sixth grade reading level, as if this were a comment on the dumbing down of society. It isn’t. Things that are easier to read are more accessible to a wider audience. It doesn’t mean they aren’t tackling difficult or nuanced topics, just that it is written in an easily understandable way!</p>



<p>The first version of Text Stats incorporated just these features:</p>



<ul><li>Word count</li><li>Character count</li><li>Reading ease</li><li>Exclamation count</li><li>Difficult words (3 or more syllables)</li><li>Difficult sentences</li><li>Adverbs (words ending in -ly)</li></ul>



<p>We created a simple iOS app to accept text input and echo back the results along with an action extension which received text from the parent app and showed a table of these stats in return.</p>



<h2>Fixes</h2>



<p>As we began to paste in text from other sources we quickly found problems. Using new lines \n instead of a full stop (for instance in lists or “read more” link). Our naïve word parse also was getting other punctuation as parts of words like quotes and commas.</p>



<p>As adults with advanced educations some of the words in the “difficult word list”, like “television” puzzled us. It is there because it has 3 or more syllables. We raised the bar to 4 or more syllables. Similarly with “difficult sentences” some rated very high in difficulty but only has two words in it. We need to add a minimum word count to a sentence for it to be considered for ranking.&nbsp;</p>



<p>To fix many of these problems we “cleaned” the text with find and replaces for quotes, commas and other punctuation. The downside was as we computed the statistics we were echoing back these altered strings. Which means that it might be hard to find in the source text. Keeping a shadow “original” text is necessary.&nbsp;</p>



<p>To fix these issues we went back and were not so naïve as we split on spaces, but revamped the parser to be more like a SAX parser and consume one character at a time and decide if we are in a word or not.</p>



<h2>GUI</h2>



<p>Let’s talk about UISplitViewController. You have probably seen this if you have used the mail app. On smaller screens like iPhones you get to see the “main view” which is usually a list of emails. When you click a cell, it moves to the detail view of the actual message. On larger screens like the iPad you see the main view as a left column and the detail view as the majority of the screen.&nbsp;</p>



<figure class="banner"><img loading="lazy" width="626" height="469" src="../../../../wp-content/uploads/2020/09/626x0w.png" alt="" class="wp-image-4731" srcset="../../../../wp-content/uploads/2020/09/626x0w.png 626w, ../../../../wp-content/uploads/2020/09/626x0w-300x225.png 300w" sizes="(max-width: 626px) 100vw, 626px" /><figcaption>Text Stats app running in  a two column split-view</figcaption></figure>



<p>Moving the existing code into the split view controller was pretty easy, but what came next wasn’t. When you think something is simple, it usually is for 80% of the use-cases, but if you want to design something well, then you need to keep exploring. For instance, the phone has two orientations. On the non-plus size phones, the landscape and portrait views show you only the main view list. But on the plus size phones you get main and detail when in landscape. The iPad is even more convoluted because you have landscape and portrait, but also split screen. In portrait it is 50/50 and in landscape it is 66/33, 50/50, &amp; 33/66. This means you are not always getting both views on the screen.&nbsp;</p>



<p>Normally, that’s not a big deal, but we are cheating. When you ONLY see the main view we sneak in an additional section and table cell with a textarea for text input. But on a larger screen we hide the text input in the main view and use the detail view as the writing canvas.&nbsp;</p>



<p>If this were CSS it would be easy to display this based on media queries, but this isn’t CSS. We need to check all sorts of things. The isCollapsed flag, check when the device rotated and is redrawn to check the new status. In browsers the event to redraw the CSS is run with every tiny change. On iOS you need to add those hooks yourself where you feel it is important.&nbsp;</p>



<p>Things like this sucked a bunch of time so development on features stalled.&nbsp;</p>



<p>We also reached out to a few more people to beta test the app. We got a bunch of great feedback and smashed a few more bugs here and there. </p>



<p>We also got some feedback about what additional text stats people would be interested in. We only managed to get one personal pet-peeve included. We created a new section called “bad habits” and added a check for sentences starting with “So”. This section will continue to grow with other pet-peeves which hopefully will be useful for others.&nbsp;</p>



<p>In the end, we also swapped out our home-built word parser for the built-in NLP parser. There are a few discrepancies. Firstly, the built in NLP would split contractions. That accounted for a slight difference in word count. Our code would handle URLs as a special case. Whereas the NLP parser did not and the // in https:// acted as a word boundary.&nbsp;</p>



<p>The NLP parser gives us better sentence splitting but also POC (part of speech) for each of the words. This allows us to correctly identify things like adverbs ending in -ly, compared to just words ending in -ly.</p>



<p>It can also help us to identify pronouns. This is very useful for other types of text analysis we want to include in the future. <em>(We won&#8217;t go into this now, but there is a lot of research around pronoun usage to signal pecking order,  gender guessing, etc. from text. There is a lot of inherent bias, cultural issues and snake oil.  So none of this is in the app.)</em></p>



<p>We add some code to count over used words like “simply”. Most of the time, you can remove this word without changing any meaning and at the same time not making the reader feel bad when it isn’t “simple” for them.&nbsp;</p>



<h2>Siri</h2>



<p>The horribly named Siri Shortcuts, which expose some of your app&#8217;s functionality in the Shortcuts app, but also Siri (sort of), was our next step in exploring places the Web isn&#8217;t (directly yet) welcome.</p>



<figure class="banner"><img loading="lazy" width="1024" height="715" src="../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.02.08-1024x715.png" alt="" class="wp-image-4799" srcset="../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.02.08-1024x715.png 1024w, ../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.02.08-300x210.png 300w, ../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.02.08-768x536.png 768w, ../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.02.08-1536x1073.png 1536w, ../../../../wp-content/uploads/2020/10/Simulator-Screen-Shot-iPad-Pro-11-inch-2nd-generation-2020-10-19-at-09.02.08-2048x1431.png 2048w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>As you build-up complex workflows, you can use Text Stats to extract some metadata, like word count, sentence count, etc. What you use these for in your workflow is up to you.</p>



<p>We don&#8217;t have a practical use for this, yet, but we learnt a lot about how  Shortcuts work for any future projects. And who know, maybe someone out there needs this exactly tool for their writing workflow? Now&#8217;s it&#8217;s possible to chain Text Stats together into something larger.</p>



<h2>NaNoWritMo</h2>



<p><a href="https://nanowrimo.org">National Novel Writing Month</a> (NaNoWritMo) is in November. We&#8217;ll try to support anyone interesting in try to write better by making the app free during this time.</p>



<p>If you find Text Stats interesting or useful, let us know.</p>



<p><a href="https://apps.apple.com/us/app/text-stats/id1373463793?ls=1">Download Text Stats</a></p>

              <div class="postmetadata">
					<p><strong>Categories:</strong> <a href="../../../../category/applications/index.html" title="View all articles in Applications" rel="tag category" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #1ddf33">Applications</a></p><p><strong>Tags:</strong> <a href="http://optional.is/required/tag/app/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #d2a57d">app</a>, <a href="http://optional.is/required/tag/app-store/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #caeaf4">app store</a>, <a href="http://optional.is/required/tag/apps/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #9a6dd2">apps</a>, <a href="http://optional.is/required/tag/ios/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #1bdf60">iOS</a>, <a href="http://optional.is/required/tag/ipad/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #09401f">ipad</a>, <a href="http://optional.is/required/tag/iphone/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #867e57">iPhone</a>, <a href="http://optional.is/required/tag/stats/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #446501">stats</a>, <a href="http://optional.is/required/tag/text/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #1cb251">text</a>, <a href="http://optional.is/required/tag/text-stats/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #6c1160">text stats</a>, <a href="http://optional.is/required/tag/writing/" rel="tag" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #1cea53">writing</a></p>			  </div>
			
		<div class="navigation">
			<div class="prev"><div class="time">09 October 02020</div><a href="../../09/week-504/index.html" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #5a1ae2">&laquo; Week #504</a></div>
			<div class="next"><div class="time">30 October 02020</div><a href="../../30/week-505-506-507/index.html" style="background-color: #f4f4f4; text-decoration: none; border-bottom: 2px solid #fcab40">Week #505, 506, 507 &raquo;</a></div>
		</div>

			</div>
			<!-- call out footer -->
			<div class="callout-footer" style="padding-top: 1em; border-top: 2px solid #810aa3; border-bottom: 2px solid #810aa3; font-size: 120%">
			<p>You've been reading optional.is/required/ a blog about technology, culture, paper and other interesting topics, since 02009. The easiest way to stay current is to grab the <a href="http://feeds2.feedburner.com/optional?format=xml">RSS Feed</a>.</p>

			<p><a href="../../../../../newsletter/index.html">Subscribe to the quarterly mailing list</a> to receive interesting stories, links and updates.</p>
			</div>
		</div>

	
<!-- You can start editing here. -->


			<!-- If comments are closed. -->
		<!-- <p class="nocomments">Comments are closed.</p> -->

	


	

<div id="footer" class="vcard">
  <div>
  <div style="float: left; font-size: 16px;">
<form method="get" id="searchform" action="http://optional.is/required/" >
<div><input type="text" value="" name="s" id="s" /><input type="submit" id="searchsubmit" value="Search" /></div>
</form>
Copyright 2009 - <a href="http://suda.co.uk/">Brian Suda</a>
</div> 
<a href="../../../../../index.html" class="url fn org" style="float:right; display: block;">(optional.is)</a>
  </div>
</div>
<script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www."); document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script>
<script type="text/javascript">try { var pageTracker = _gat._getTracker("UA-2497164-9"); pageTracker._trackPageview(); } catch(err) {}</script>

</body>
</html>
